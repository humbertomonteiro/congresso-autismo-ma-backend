const CheckoutRepository = require("./src/repositories/CheckoutRepository");
const BancoDoBrasilService = require("./src/services/BancoDoBrasilService");

const verificarBoletos = async () => {
  try {
    // const checkouts = await CheckoutRepository.fetchCheckouts({
    //   paymentMethod: "boleto",
    //   status: "error",
    // });

    // const arrayNumerosBoletos = checkouts.map(
    //   (checkout) => checkout.transactionId
    // );

    // const statusBoletos = await Promise.all(
    //   arrayNumerosBoletos.map((number) =>
    //     BancoDoBrasilService.getBoletoStatus(number)
    //   )
    // );

    const numerosBoletos = [
      // "00037412306104033054",
      // "00037412306209890628",
      // "00037412306213920849",
      // "00037412306406993726",
      // "00037412306449918212",
      // "00037412306467139253",
      // "00037412306469214452",
      // "00037412306489152750",
      // "00037412306571003303",
      // "00037412306642493995",
      // "00037412306653441288",
      // "00037412306662019970",
      // "00037412306662884509",
      // "00037412306712452259",
      // "00037412306730398737",
      // "00037412306757329331",
      // "00037412306812364550",
      // "00037412306813418969",
      // "00037412306820730338",
      // "00037412306984594981",
      // "00037412307044341874",
      // "00037412307074212420",
      // "00037412307084805636",
      // "00037412307087540570",
      // "00037412307097818032",
      // "00037412307137916044",
      // "00037412307147171718",
      // "00037412307148701893",
      // "00037412307151819191",
      // "00037412307158848770",
      // "00037412307166551968",
      // "00037412307245019428",
      // "00037412307253361380",
      // "00037412307261898107",
      // "00037412307275606168",
      // "00037412307292739487",
      // "00037412307314656162",
      // "00037412307318773574",
      // "00037412307319259997",
      // "00037412307319846445",
      // "00037412307330688439",
      // "00037412307335693971",
      // "00037412307410826484",
      // "00037412307411729083",
      // "00037412307419232202",
      // "00037412307421039402",
      // "00037412307425241366",
      // "00037412307442143775",
      // "00037412308109813983",
      // "00037412308102832143",
      // "00037412308047946584",
      // "00037412308032736239",
      // "00037412308032462835",
      // "00037412308027512600",
      // "00037412308022694367",
      // "00037412308020758732",
      // "00037412308020384813",
      // "00037412308016464885",
      // "00037412308003887193",
      // "00037412307946152780",
      // "00037412307944262984",
      // "00037412307942861828",
      // "00037412307942292029",
      "00037412307292739487",
      "00037412307314656162",
      "00037412307318773574",
      "00037412307335693971",
      "00037412307410826484",
      "00037412307411729083",
      "00037412307419232202",
      "00037412307421039402",
      "00037412307425241366",
      "00037412307442143775",
      "00037412307567344225",
      "00037412307569246033",
      "00037412307598203311",
      "00037412307621527790",
      // "00037412307567344225",
    ];

    // const statusBoleto = await BancoDoBrasilService.getBoletoStatus(
    //   "00037412306104033054"
    // );

    numerosBoletos.forEach(async (e) => {
      const statusBoleto = await BancoDoBrasilService.getBoletoStatus(e);
      console.log(statusBoleto);
    });

    // console.log("Status dos boletos:", statusBoletos);
    // console.log("Status dos boletos:", statusBoleto);
  } catch (error) {
    console.error("Erro ao verificar boletos:", error);
    throw error;
  }
};

verificarBoletos();

// node verificarBoletos.js

// pending
// [BB Service] Resposta do status do boleto: 1 DJANE REIS DINIZ SILVA

// approved
// [BB Service] Resposta do status do boleto: 6 THAYS CRISTINA OLIVEIRA PARGA
